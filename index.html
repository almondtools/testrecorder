        <!DOCTYPE html>
      <html lang="en">
                <head>
                  <meta charset="utf-8"/>
              <meta name="viewport" content="width=device-width, user-scalable=yes"/>
              <meta name="google-site-verification" content="zi2eDd9lPMxUKII5BagZe7uZLJdM-xwB3MYmn7At8m4"/>
              <meta name="google-site-verification" content="1tr9mxi3jNPA21quNokfjk011xmqU4KEYwxceZ4nPQg"/>
              <meta name="msvalidate.01" content="126AC9C6E2D2542FF635FD81D91FBF19"/>
              <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
              <link rel="stylesheet" href="custom.css"/>
              <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/default.min.css"/>
                  <title>Testrecorder - Generate Test Fixtures from Runnable Java Code</title>
      <meta name="description" content="Testrecorder ist a semi-automatic unit test generator for Java. Testrecorder is based on capturing and replaying the states before and after method calls. The generated result is a pure Java JUnit test."/>
      <meta name="keywords" content="automatic,testing,recorder,code generator,test generator,generate tests,Java,JUnit,unit test,characterization test,capture,replay"/>
      <link rel="canonical" href="http://testrecorder.amygdalum.net"/>
  </head>
            <body>
                    <header>
                              <nav class="navbar navbar-dark bg-dark navbar-expand-sm" role="navigation">
    <div class="container-fluid">            <div class="navbar-header">        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-collapse">            <span class="navbar-toggler-icon"></span></button>
        <a href="download.html" class="navbar-brand">Testrecorder</a></div>
            <div class="collapse navbar-collapse"><ul class="navbar-nav">        <li class="nav-item active"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="download.html">Get it!</a></li>
        <li class="nav-item"><a class="nav-link" href="license.html">License</a></li></ul></div></div>
  </nav>
                      <div class="jumbotron"><div class="container">        <h1>Testrecorder</h1>
        <p>Testrecorder ist a semi-automatic unit test generator for Java. Testrecorder is based on capturing and replaying the states before and after method calls. The generated result is a pure Java JUnit test.</p>
        <p><a href="download.html" class="btn btn-primary">Get Testrecorder</a> <a href="https://github.com/almondtools/testrecorder" class="btn btn-light">Github</a></p></div></div>
  </header>
              <main>
    <div class="container">              <section class="page-section">
            <div class="row">            <div class="col-lg-8">                <p>You have code, you have a running system - and you have no tests. This is where <strong>Testrecorder</strong> jumps in. The most relevant tests of a system are those, that resemble the workflow of the users of the system. <strong>Testrecorder</strong> in an automatic test case generator from user inputs. It records every user interaction in which the previously selected method is involved and generates executable JUnit-Tests for this recorded interaction. Thus</p>
<h2>TL;DR?</h2>
<p><strong>Testrecorder</strong> generates tests with a capture-replay technique. It differs in some ways from other capture-replay or test generation tools:</p>
<ul>
<li>Testrecorder records method calls not GUI/Web interactions</li>
<li>Testrecorder generates ready-to-run-unit tests (java files) not only specifications</li>
<li>Testrecorder records not only arguments and results, but also fields, global variables, exceptions and input/output</li>
<li>Testrecorder records not only input data but also changes</li>
<li>Testrecorder is configurable and extensible with custom components</li>
<li>Testrecorder may be used as agent at load time, as agent on an already running system, or as library dependency</li>
<li>Testrecorder is strictly about recording real interactions (no fuzzing, no randomness, no static analysis)</li>
<li>Testrecorder supports different testing frameworks (e.g. JUnit 4, JUnit 5) and is extensible for others</li>
</ul>
<p>Use <strong>Testrecorder</strong> as an automatic test generator by just recording all interactions of a certain method. Or you can explicitly reproduce buggy scenarios and record them (semi-automatic since such tests afford the attention of an analyzing tester).</p>
<h2>Basic Usage</h2>
<h3>1. Annotate the method to record</h3>
<p>Annotate the method to record with <code>@Recorded</code>. For example you want to record this simple example</p>
<pre><code>package fizzbuzz;

public class FizzBuzz {
    @Recorded
    public String fizzBuzz(int i) {
        if (i % 15 == 0) {
            return &quot;FizzBuzz&quot;;
        } else if (i % 3 == 0) {
            return &quot;Fizz&quot;;
        } else if (i % 5 == 0) {
            return &quot;Buzz&quot;;
        } else {
            return String.valueOf(i);
        }
    }
}
</code></pre>
<h3>2. Configure the test serialization</h3>
<p>Create a directory <code>agentconfig</code> (either on your classpath or in the directory you run from). This directory should contain at least two files:</p>
<ul>
<li><code>net.amygdalum.testrecorder.profile.SerializationProfile</code> containing a single line:</li>
</ul>
<pre><code>    fizzbuzz.SerializationProfile
</code></pre>
<ul>
<li><code>net.amygdalum.testrecorder.SnapshotConsumer</code> containing a single line:</li>
</ul>
<pre><code>    fizzbuzz.TestGenerator
</code></pre>
<p>These files refer two the configuration classes. A <code>SerializationProfile</code> configures which classes/methods/fields should be analyzed, included or excluded from recording. A <code>SnapshotConsumer</code> is notified if some recorded <code>ContextSnapshot</code> is available. Typically we want to generate Tests from the snapshot, so we plug in a configured instance of <code>ScheduledTestGenerator</code>.</p>
<p>Now implement the two configuration classes:</p>
<pre><code>package fizzbuzz;
 
public class SerializationProfile extends DefaultSerializationProfile {

    @Override
    public List&lt;Classes&gt; getClasses() {
        return asList(Classes.byPackage(&quot;fizzbuzz&quot;));
    }

}
</code></pre>
<p><code>getClasses</code> defines all classes that are analyzed. Any method of an analyzed class may be recorded.</p>
<pre><code>package fizzbuzz;

public class TestGenerator extends ScheduledTestGenerator {

    public TestGenerator(AgentConfiguration config) {
        super(config);
        this.generateTo = Paths.get(&quot;target/generated&quot;);
        this.dumpOnShutdown(true);
    }

}
</code></pre>
<p>We use a typical <code>ScheduledTestGenerator</code> modifying it two have following properties:</p>
<ul>
<li>all tests will be generated to the directory <code>target/generated</code></li>
<li>shutdown of the host program should trigger test generation</li>
</ul>
<h3>3. Run your program with TestRecorderAgent</h3>
<p>To run your program with test recording activated you have to call it with an agent</p>
<p><code>-javaagent:testrecorder-agent-[version]-agent.jar</code></p>
<p><code>testrecorder-agent-[version]-agent.jar</code> is an artifact provided by the maven build (available in maven repository).</p>
<h3>4. Interact with the program and check results</h3>
<p>You may now interact with your program and every call to a <code>@Recorded</code> method will be captured. After shutdown of your program all captured recordings will be transformed to executable JUnit tests, e.g.</p>
<pre><code>@Test
public void testFizzBuzz0() throws Exception {

    //Arrange
    FizzBuzz fizzBuzz1 = new FizzBuzz();
    
    //Act
    String string1 = fizzBuzz1.fizzBuzz(1);
    
    //Assert
    assertThat(string1, equalTo(&quot;1&quot;));
    assertThat(fizzBuzz1, new GenericMatcher() {
    }.matching(FizzBuzz.class));
}

...
</code></pre>
</div>
            <div class="col-lg-4">                    <div class="card info-card">        <div class="card-header"><h4>Benefits</h4></div>
        <div class="card-body">                    <p>Use the generated tests as <strong>characterization tests</strong> for test regression. Many refactoring will directly adjust the test, few will need some manual corrections and none will force you to dig in xml (or java serialization code) to correct the data of the test.</p>
<p>The generated test can also give you <strong>insights about what is changed</strong> in the tested scenario - involving not only primitive arguments and results, but also side effects on arguments, global variables and exceptions.</p>
<p>And if you think testrecording is cool, but you are missing certain features: the <strong>api of testrecorder is open</strong>. You may generate setup code (the code that generates a given object) and matcher code (the code that validates a given object) as part of your debugging (or runtime system).</p>
</div></div>
                    <div class="card info-card">        <div class="card-header"><h4>Advanced Topics</h4></div>
        <div class="card-body">                                            <p>Following subjects could be of further interest:</p>
<ul>
<li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/Architecture.md">An Introduction to the Testrecorder Architecture</a></li>
<li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/RecordingIO.md">Recording Input/Output</a></li>
<li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/RecordingEE.md">Recording Enterprise Java</a></li>
<li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/API.md">Using the Testrecorder-API to serialize data and generate code</a></li>
<li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/Extending.md">Extending Testrecorder with Custom Components</a></li>
<li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/TuningOutput.md">Tuning the Output of Testrecorder</a></li>
<li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/CreatingCustomAgents.md">Creating a Custom Agent</a></li>
</ul>
</div></div>
                    <div class="card info-card">        <div class="card-header"><h4>Limitations</h4></div>
        <div class="card-body">                                            <p>TestRecorder serialization (for values and tests) does not cover all of an objects properties. Problems might occur with:</p>
<ul>
<li>static fields</li>
<li>synthetic fields (e.g. added by some bytecode rewriting framework)</li>
<li>native state</li>
<li>proxies</li>
<li>state that influences object access (e.g. modification counter in collections)</li>
</ul>
<p>Such scenarios should be solved with <a href="https://github.com/almondtools/testrecorder/blob/master/doc/Extending.md">custom serializers and/or custom desersializers</a>.</p>
</div></div>
                    <div class="card info-card">        <div class="card-header"><h4>Examples</h4></div>
        <div class="card-body">                    <p>Examples can be found at <a href="https://github.com/almondtools/testrecorder-examples">testrecorder-examples</a></p>
</div></div>
                    <div class="card info-card">        <div class="card-header"><h4>Talks</h4></div>
        <div class="card-body">                    <h5>Recent</h5>
<ul>
<li><a href="https://entwicklertag.de/karlsruhe/2017/legacy-code-reverse">Legacy Code Reverse Engineering (ET Karlsruhe)</a></li>
<li><a href="https://www.xpdays.de/2017/sessions/124-record-refactor-replay-characterization-tests-einfach-aufnehmen.html">Record - Refactor - Replay (XP-Days)</a></li>
<li><a href="https://entwicklertag.de/karlsruhe/2018/testgenerierung-java-ein">Testgenerierung in Java - ein Überblick (ET Karlsruhe)</a></li>
<li><a href="https://www.xpdays.de/2018/sessions/170-testgenerierung-in-java-ein-ueberblick.html">Testgenerierung in Java - ein Überblick (XP-Days)</a></li>
</ul>
<h5>Preview</h5>
<ul>
<li><a href="https://www.code-days.de/programm/programm-details/409/just-in-time-patching-java-applications/">Just-In-Time Patching Java Applications (Code-Days Munich</a></li>
<li><a href="https://entwicklertag.de/frankfurt/2020/just-time-patching-java-applications">Just-In-Time Patching Java Applications (ET Frankfurt)</a></li>
</ul>
</div></div></div></div>
  </section>
              <section class="page-section">
            <div class="row">            <div class="order-2 col-lg-4">            </div>
            <div class="order-1 col-lg-8">                <h2>Authors</h2>
                <p><a href="http://www.amygdalum.net">Stefan Mandel</a></p></div></div>
  </section></div>
  </main>
              <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
              <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
              <script>hljs.initHighlightingOnLoad()</script>
  </body>
  </html>