        <!DOCTYPE html>
      <html>
                <head>
                  <meta charset="utf-8"/>
              <meta name="google-site-verification" content="zi2eDd9lPMxUKII5BagZe7uZLJdM-xwB3MYmn7At8m4"/>
              <meta name="google-site-verification" content="1tr9mxi3jNPA21quNokfjk011xmqU4KEYwxceZ4nPQg"/>
              <meta name="msvalidate.01" content="126AC9C6E2D2542FF635FD81D91FBF19"/>
              <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
              <link rel="stylesheet" href="custom.css"/>
              <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/default.min.css"/>
                  <title>Testrecorder - Generate Test Fixtures from Runnable Java Code</title>
      <meta name="description" content="Record Test Fixtures from Runnable Java Code"/>
      <meta name="keywords" content="testing,recorder,code generator,test generator,Java,characterization test"/>
      <link rel="canonical" href="http://testrecorder.amygdalum.net"/>
  </head>
            <body>
                            <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
                  <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                  <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
  </button>
          <a href="download.html" class="navbar-brand">
    Testrecorder
  </a>
  </div>
              <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
              <li class="active">  <a href="index.html">
    Home
  </a></li>
          <li >  <a href="download.html">
    Get it!
  </a></li>
          <li >  <a href="license.html">
    License
  </a></li>
  </ul>
  </div>
  </div>
  </nav>
                      <div class="jumbotron">
      <div class="container">
              <h1>Testrecorder</h1>
          <p>Record Test Fixtures from Runnable Java Code</p>
          <p>  <a href="download.html" class="btn btn-primary">
    Get Testrecorder
  </a>   <a href="https://github.com/almondtools/testrecorder" class="btn btn-default">
    Github
  </a></p>
  </div>
  </div>
              <div class="container">
                  <div class="row">
              <div class="col-md-8">
                <p><strong>Testrecorder</strong> is a tool for recording runtime behavior of java programs. The results of such a recording are executable JUnit-tests replaying the recorded behavior.</p>
<ul>
  <li>You can use these tests as part of your characterization tests</li>
  <li>Or you can refactor them (they are pure java) to make up proper unit tests</li>
  <li>Even without reusing the generated code it could give valuable insights for code understanding</li>
</ul>
<p><strong>Testrecorder</strong> uses an api to serialize objects to executable java code or hamcrest matchers.</p>
<h1>Basic Usage</h1>
<h2>1. Annotate the method to record</h2>
<p>Annotate the method to record with <code>@Recorded</code>. For example you want to record this simple example</p>
<pre><code>public class FizzBuzz {
    @Recorded
    public String fizzBuzz(int i) {
        if (i % 15 == 0) {
            return &quot;FizzBuzz&quot;;
        } else if (i % 3 == 0) {
            return &quot;Fizz&quot;;
        } else if (i % 5 == 0) {
            return &quot;Buzz&quot;;
        } else {
            return String.valueOf(i);
        }
    }
}
</code></pre>
<h2>2. Configure the test serialization</h2>
<p>Write a java configuration file that implements <code>TestRecorderAgentConfig</code>. For example:</p>
<pre><code>public class AgentConfig extends DefaultTestRecorderAgentConfig {

    @Override
    public SnapshotConsumer getSnapshotConsumer() {
        return new ScheduledTestGenerator()
            .withDumpOnShutDown(true)                       
            .withDumpTo(Paths.get(&quot;target/generated&quot;));     
    }

    @Override
    public long getTimeoutInMillis() {
        return 100_000;
    }

    @Override
    public List&lt;Packages&gt; getPackages() {
        return asList(Packages.byName(&quot;com.almondtools.testrecorder.examples&quot;));
    }

}
</code></pre>
<p>Now some explanations:</p>
<p><code>getSnapshotConsumer</code> should return the client that generates your test. You can use any class implementing <code>SnapshotConsumer</code> yet there are two default implementations:</p>
<ul>
  <li><code>TestGenerator</code> is a low level implementation. It can collect tests but will write them only driven by API calls. Actually you should use this class only as super class for your own implementations. Such sub classes are not limited when and where to write tests.</li>
  <li><code>ScheduledTestGenerator</code> is a simple <code>TestGenerator</code> implementation allowing you to specify when to write tests to the file system. As you can see in the example you can specify to write tests at program shutdown (with <code>withDumpOnShutDown(true)</code>) and you should specify the directory where serialized tests should be stored (with <code>withDumpTo([directory])</code>)</li>
</ul>
<p><code>getTimeoutInMillis</code> will be the limit for the recording time. This threshold is built in to skip unexpectedly long (possibly infinite) serializations. The value of <code>100_000</code> will actually only stop such long serializations. </p>
<p><code>getPackages</code> should return a list of java packages that should be analyzed. Only methods in these packages are recorded (<code>@Recorded</code>-Annotations that are in packages not specified here will not have any effect)</p>
<h2>3. Run your program with TestRecorderAgent</h2>
<p>To run your program with test recording activated you have to call ist with an agent</p>
<p><code>-javaagent:testrecorder-[version]-jar-with-dependencies.jar=AgentConfig</code></p>
<p><code>testrecorder-[version]-jar-with-dependencies.jar</code> is an artifact provided by the maven build (available in maven repository).</p>
<p><code>AgentConfig</code> is your configuration class from the former step.</p>
<h2>4. Interact with the program and check results</h2>
<p>You may now interact with your program and every call to a <code>@Recorded</code> method will be captured. After shutdown of your program all captured recordings will be transformed to executable JUnit tests, e.g.</p>
<pre><code>@Test
public void testFizzBuzz0() throws Exception {

    //Arrange
    FizzBuzz fizzBuzz1 = new FizzBuzz();

    //Act
    String string1 = fizzBuzz1.fizzBuzz(1);

    //Assert
    assertThat(string1, equalTo(&quot;1&quot;));
    assertThat(fizzBuzz1, new GenericMatcher() {
    }.matching(FizzBuzz.class));
}

...
</code></pre>
  </div>
          <div class="col-md-4">
                      <div class="panel panel-default">
              <div class="panel-heading">
      <h4>Advanced Topics</h4>
  </div>
          <div class="panel-body">
                                        <p>Following subjects could be of further interest:</p>
<ul>
  <li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/Architecture.md">An Introduction to the Testrecorder Architecture</a></li>
  <li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/TuningOutput.md">Tuning the Output of Testrecorder</a></li>
  <li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/RecordingIO.md">Recordering Input/Output with Testrecorder</a></li>
  <li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/API.md">Using the Testrecorder-API to serialize data and generate code</a></li>
  <li><a href="https://github.com/almondtools/testrecorder/blob/master/doc/Extending.md">Extending Testrecorder with Custom Components</a></li>
</ul>
  </div>
  </div>
                  <div class="panel panel-default">
              <div class="panel-heading">
      <h4>Limitations</h4>
  </div>
          <div class="panel-body">
                    <p>TestRecorder serialization (for values and tests) does not cover all of an objects properties. Problems might occur with:</p>
<ul>
  <li>static fields</li>
  <li>synthetic fields (e.g. added by some bytecode rewriting framework)</li>
  <li>native state</li>
  <li>state that influences object access (e.g. modification counter in collections)</li>
</ul>
  </div>
  </div>
                  <div class="panel panel-default">
              <div class="panel-heading">
      <h4>Examples</h4>
  </div>
          <div class="panel-body">
                    <p>Examples can be found at <a href="https://github.com/almondtools/testrecorder-examples">testrecorder-examples</a> </p>
  </div>
  </div>
                  <div class="panel panel-default">
              <div class="panel-heading">
      <h4>Roadmap</h4>
  </div>
          <div class="panel-body">
                    <p>The objective of Testrecorder is to provide an interface that is powerful, clean and extensible. To achieve this we will provide more and more configuration settings to extend the core framework. The fact that tests are generated automatically might rise wrong expectations: Testrecorder will probably always be an experts tool, meaning strong programming and debug skills are recommended to find the correct configuration and the necessary custom extensions.</p>
<p>Testrecorder was not yet tested on a large set of code examples. Some classes are not as easy to serialize as others, so if you encounter problems, try to write an issue. Hopefully - most fixes to such problems should be solvable with custom serializers or custom deserializers. </p>
  </div>
  </div>
  </div>
  </div>
              <section>
              <div class="row">
                  <div class="col-md-push-8 col-md-4">
                
  </div>
              <div class="col-md-pull-4 col-md-8">
                      <h2>Authors</h2>
                  <p>  <a href="http://www.amygdalum.net">
    Stefan Mandel
  </a></p>
  </div>
  </div>
  </section>
  </div>
              <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
              <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
              <script>hljs.initHighlightingOnLoad()</script>
  </body>
  </html>